{"version":3,"file":"index.js","mappings":"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","sources":["webpack://wp-extend/./src/index.js"],"sourcesContent":["const { registerBlockType } = wp.blocks;\nconst { InspectorControls } = wp.blockEditor || wp.editor;\nconst { PanelBody, TextControl, RangeControl } = wp.components;\nconst { useEffect, useState } = wp.element;\nconst { apiFetch } = wp;\n\nif (typeof wp !== 'undefined' && wp.blocks && wp.blockEditor && wp.components && wp.element && typeof ewp_blocks !== 'undefined') {\n Object.keys(ewp_blocks).forEach((key) => {\n  const block = ewp_blocks[key];\n  const namespace = `${block.namespace}/${block.name}`;\n  registerBlockType(namespace, {\n   title: block.title,\n   icon: block.icon,\n   category: block.category,\n   attributes: block.attributes,\n   edit: function (props) {\n    const { attributes, setAttributes } = props;\n    // Initialize inputValues with default or initial values from block.attributes\n    const initialValues = Object.keys(block.attributes).reduce((acc, attrKey) => {\n     const attribute = block.attributes[attrKey];\n     acc[attrKey] = attributes[attrKey] || attribute.default || '';\n     return acc;\n    }, {});\n\n\n    const [content, setContent] = useState('');\n    const [inputValues, setInputValues] = useState(initialValues);\n\n    const handleInputChange = (identifier, newValue) => {\n     setInputValues({\n      ...inputValues,\n      [identifier]: newValue,\n     });\n    };\n\n    useEffect(() => {\n     // Your existing logic to fetch and set content\n     const queryParams = new URLSearchParams(inputValues).toString();\n     apiFetch({ path: `${block.namespace}/${block.name}/preview?${queryParams}` }).then((html) => {\n       setContent(html);\n       var data = { response: html, block: block };\n       const event = new CustomEvent(\"ewp_dynamic_block_on_change\", { detail: data });\n       document.dispatchEvent(event);\n     });\n    }, [JSON.stringify(inputValues)]);\n\n    if (typeof block.attributes === 'object' && block.attributes !== null) {\n     var elements = [];\n     Object.entries(block.attributes).forEach(([key, data]) => {\n      // key is the attribute name\n      // value is the attribute value\n      // You can use a switch statement to handle different types\n\n      switch (data.render_type) {\n       case 'select':\n        elements.push(wp.element.createElement(wp.components.SelectControl, {\n         label: data.label,\n         value: props.attributes[key],\n         options: data.options,\n         onChange: function (value) {\n          setAttributes({ [key]: value });\n          handleInputChange(key, value)\n         }\n        }));\n        break;\n        case 'color':\n          elements.push(wp.element.createElement(wp.components.ColorPicker, {\n            label: data.label,\n            color: props.attributes[key], // Use 'color' instead of 'value'\n            onChangeComplete: function (value) {\n              // Extract the color from 'value.hex' instead of 'value' directly\n              const colorValue = value.hex;\n              setAttributes({ [key]: colorValue });\n              handleInputChange(key, colorValue);\n            }\n          }));\n          break;\n       case 'textarea':\n        elements.push(wp.element.createElement(wp.components.TextareaControl, {\n         label: data.label,\n         value: props.attributes[key],\n         onChange: function (value) { setAttributes({ [key]: value }); handleInputChange(key, value) }\n        }));\n        break;\n       case 'number':\n        elements.push(wp.element.createElement(wp.components.RangeControl, {\n         label: data.label,\n         value: props.attributes[key],\n         onChange: function (value) { setAttributes({ [key]: value }); handleInputChange(key, value) },\n         min: data.attributes.min || 0,\n         max: data.attributes.max || 100,\n         step: data.attributes.step || 1\n        }));\n        break;\n       case 'string':\n        elements.push(wp.element.createElement(wp.components.TextControl, {\n         label: data.label,\n         value: props.attributes[key],\n         onChange: function (value) { setAttributes({ [key]: value }); handleInputChange(key, value) }\n        }));\n        break;\n       case 'boolean':\n        elements.push(wp.element.createElement(wp.components.ToggleControl, {\n         label: data.label,\n         checked: props.attributes[key],\n         onChange: function (value) { setAttributes({ [key]: value }); handleInputChange(key, value) }\n        }));\n        break;\n       default:\n        // Handle other types\n        break;\n      }\n     });\n     return [\n      wp.element.createElement(\n       InspectorControls,\n       null,\n       wp.element.createElement(\n        PanelBody,\n        {\n         title: block.title + ' Settings', initialOpen: true\n        },\n        elements\n       )\n      ),\n      wp.element.createElement(\n       'div',\n       {\n        className: props.className,\n        dangerouslySetInnerHTML: { __html: content }\n       }\n      ),\n     ];\n    }\n   },\n   save: function () {\n    return null;\n   },\n  });\n });\n}"],"names":["registerBlockType","wp","blocks","InspectorControls","blockEditor","editor","_wp$components","components","PanelBody","_wp$element","TextControl","RangeControl","element","useEffect","useState","apiFetch","ewp_blocks","Object","keys","forEach","key","block","namespace","concat","name","title","icon","category","attributes","edit","props","setAttributes","initialValues","reduce","acc","attrKey","attribute","_useState2","_slicedToArray","content","setContent","_useState4","inputValues","setInputValues","handleInputChange","identifier","newValue","_objectSpread","_defineProperty","queryParams","URLSearchParams","toString","path","then","html","event","CustomEvent","detail","response","document","dispatchEvent","JSON","stringify","_typeof","elements","entries","_ref2","_ref3","data","render_type","push","createElement","SelectControl","label","value","options","onChange","ColorPicker","color","onChangeComplete","colorValue","hex","TextareaControl","min","max","step","ToggleControl","checked","initialOpen","className","dangerouslySetInnerHTML","__html","save"],"sourceRoot":""}